<!DOCTYPE html><html xmlns=http://www.w3.org/1999/xhtml><head><title></title></head><body><canvas width=500 height=500></canvas><button>Start</button><script src=//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js></script><script src=js/GameInput.js></script><script>"use strict";function getSpriteImg(){img.onload=function(){drawSprite()},img.src="img/sprites/player/player.png"}function loop(){raf=requestAnimationFrame(loop),++timer>80&&(timer=0),t=timer%80,num=t>=0&&20>t?1:t>=20&&40>t?2:t>=40&&60>t?3:2,drawSprite()}function drawSprite(){switch(ctx.fillStyle="#fff",ctx.fillRect(0,0,500,500),ctx.font="30px Arial",ctx.fillStyle="#000",ctx.fillText("Run "+num,100,100),num){case-1:pos=spriteArr.playerRight;break;case 0:pos=spriteArr.playerRight_Step;break;case 1:case 2:case 3:pos=spriteArr["playerRight_Run"+num]}ctx.drawImage(img,pos.x,pos.y,48,65,100,150,96,130)}var canvas=document.getElementsByTagName("canvas")[0],ctx=canvas.getContext("2d"),raf,isRunning=!1,num=-1,spriteArr=[],img=new Image,timer=0,t=0,pos={x:0,y:0};$.get("img/sprites/player/player.xml",function(t){var e=$(t).find("sprite");$(e).each(function(){var t=$(this).attr("n"),e=$(this).attr("x"),i=$(this).attr("y");t=t.substring(0,t.length-4),spriteArr[t]={x:e,y:i}}),getSpriteImg()});var btn=document.getElementsByTagName("button")[0];btn.onclick=function(){isRunning?(isRunning=!1,this.innerText="Start",cancelAnimationFrame(raf)):(isRunning=!0,this.innerText="Stop",requestAnimationFrame(loop))}</script></body></html>