{
  "version": 3,
  "file": "pageDormanticide.js",
  "sources": [
    "games/dormanticide/js/engine/GameEngine.js",
    "games/dormanticide/js/engine/Input.js",
    "games/dormanticide/js/view/BattleView.js",
    "games/dormanticide/js/dormant/Dormant.js",
    "games/dormanticide/js/dormant/FightAction.js",
    "games/dormanticide/js/main.js"
  ],
  "names": [],
  "mappings": "AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,I;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,K;AClGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;ACbA;AACA;AACA;AACA,a",
  "sourcesContent": [
    "/// <reference path=\"../linker.js\" />\r\n\r\nvar GameEngine = function () {\r\n\r\n    canvas = document.getElementsByTagName(\"canvas\")[0];\r\n    ctx = canvas.getContext(\"2d\");\r\n\r\n    input = new Input();\r\n\r\n    var actions = [FightAction.TACKLE, FightAction.DRAGONS_BREATH, null, null];\r\n\r\n    var malaise = new Dormant(\"MALAISE\", 12, 8, 27, actions);\r\n    var erabor = new Dormant(\"ERABOR\", 8, 12, 23, actions);\r\n    view = new BattleView(\"#ddd\", malaise, erabor);\r\n\r\n\r\n\r\n\r\n    function update() {\r\n        //input.update();\r\n        view.update();\r\n    }\r\n\r\n    function render() {\r\n        requestAnimationFrame(render);\r\n        view.render();\r\n    }\r\n\r\n    return {\r\n        start: function () {\r\n            setInterval(update, 1000 / 60);\r\n            requestAnimationFrame(render);\r\n        },\r\n\r\n        stop: function () {\r\n\r\n        }\r\n    };\r\n};",
    "var KeyCode = Object.freeze({\r\n    ENTER: 13,\r\n    CTRL: 17,\r\n    A: 65,\r\n    D: 68,\r\n    F: 70,\r\n    H: 72,\r\n    J: 74,\r\n    K: 75,\r\n    M: 77,\r\n    O: 79,\r\n    R: 82,\r\n    S: 83,\r\n    W: 87,\r\n    EMPTY: -1,\r\n    SPACEBAR: 32\r\n});\r\n\r\nfunction Input() {\r\n    keysDown = {};\r\n    lastKeyUp = KeyCode.EMPTY;\r\n\r\n    addEventListener(\"keydown\", function (e) {\r\n        keysDown[e.keyCode] = true;\r\n    }, true);\r\n\r\n    addEventListener(\"keyup\", function (e) {\r\n        lastKeyUp = e.keyCode;\r\n        delete keysDown[e.keyCode];\r\n    }, false);\r\n}\r\n\r\n//Input.prototype = function () {\r\n\r\n//    return {\r\n//        update: function () {\r\n\r\n//        }\r\n//    };\r\n//};",
    "/// <reference path=\"../linker.js\" />\r\n\r\n/*\r\n    @param(string) bgColor The view background color.\r\n    @param(Dormant) dormantL The player's dormant.\r\n    @param(Dormant) dormantR The opponent's dormant.\r\n*/\r\nfunction BattleView(bgColor, dormantL, dormantR) {\r\n    this.bgColor = bgColor;\r\n    this.dormantL = dormantL;\r\n    this.dormantR = dormantR;\r\n}\r\n\r\nBattleView.prototype = (function () {\r\n\r\n    var arrow = {\r\n        x: 43,\r\n        y: 350,\r\n        curSlot: 0\r\n    };\r\n\r\n    function drawDormantHUD(dormant, x, y) {\r\n        ctx.fillStyle = \"#000\";\r\n        ctx.fillText(dormant.name + \"  L\" + dormant.lvl, x + 40, y);\r\n        ctx.fillText(\"HP\", x, y + 20);\r\n\r\n        ctx.strokeStyle = \"#000\";\r\n        ctx.strokeRect(x + 20, y + 12, 100, 10);\r\n\r\n        ctx.fillStyle = \"red\";\r\n        ctx.fillRect(x + 21, y + 13, dormant.hp * (100/dormant.initHP) - 1, 8);\r\n    }\r\n    \r\n    function drawHUD(dormant) {\r\n        ctx.strokeStyle = \"#000\";\r\n        ctx.strokeRect(20, 300, 500, 250);\r\n\r\n        ctx.fillStyle = \"#000\";\r\n        ctx.fillText(\"ATK: \" + dormant.atk, 460, 320);\r\n        ctx.fillText(\"DEF: \" + dormant.def, 460, 340);\r\n    }\r\n\r\n    function drawActions(dormant) {\r\n        ctx.fillStyle = \"#000\";\r\n\r\n        for (var i = 0; i < 4; ++i) {\r\n            if (dormant.actions[i] === null) {\r\n                ctx.fillText(\"--\", 80, 350 + i * 30);\r\n            }\r\n            else {\r\n                ctx.fillText(dormant.actions[i].name, 80, 350 + i * 30);\r\n            }\r\n        }\r\n    }\r\n\r\n    function drawActionArrow() {\r\n        ctx.fillStyle = \"#000\";\r\n        ctx.fillText(\">>\", arrow.x, arrow.y);\r\n    }\r\n\r\n\r\n    return {\r\n        update: function () {\r\n            switch(lastKeyUp){\r\n                case KeyCode.ENTER:\r\n                    this.dormantR.hp -= (this.dormantL.atk * this.dormantL.actions[arrow.curSlot].multiplier) / this.dormantR.def;\r\n                    lastKeyUp = KeyCode.EMPTY;\r\n                    break;\r\n                case KeyCode.W:\r\n                    if (arrow.curSlot !== 0 && this.dormantL.actions[arrow.curSlot - 1] !== null) {\r\n                        --arrow.curSlot;\r\n                        arrow.y -= 30;\r\n                    }\r\n                    break;\r\n                case KeyCode.S:\r\n                    if (arrow.curSlot !== 3 && this.dormantL.actions[arrow.curSlot + 1] !== null) {\r\n                        ++arrow.curSlot;\r\n                        arrow.y += 30;\r\n                    }\r\n                    break;\r\n            }\r\n        },\r\n\r\n        render: function () {\r\n            // background\r\n            ctx.fillStyle = this.bgColor;\r\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n            // left\r\n            drawDormantHUD(this.dormantL, 10, 15);\r\n            drawHUD(this.dormantL);\r\n            drawActions(this.dormantL);\r\n            drawActionArrow();\r\n\r\n            // right\r\n            drawDormantHUD(this.dormantR, canvas.width - 130, 15);\r\n        }\r\n    };\r\n})();",
    "/// <reference path=\"../linker.js\" />\r\n\r\n/*\r\n    @param(string) name The name of the dormant.\r\n    @param(number) atk The attack strength of the dormant.\r\n    @param(number) def The defense strength of the dormant.\r\n    @param(number) hp The total available health points of the dormant.\r\n    @param(array) actions The fight actions of the dormant.\r\n    @param(?number) lvl The level of the dormant. (1 by default)\r\n*/\r\nfunction Dormant(name, atk, def, hp, actions, lvl) {\r\n    this.name = name;\r\n    this.atk = atk;\r\n    this.def = def;\r\n    this.initHP = this.hp = hp;\r\n    this.actions = actions;\r\n    this.lvl = (typeof(lvl) !== \"undefined\") ? lvl : 1;\r\n}\r\n\r\n",
    "var FightAction = Object.freeze({\r\n    TACKLE: {\r\n        name: \"TACKLE\",\r\n        multiplier: 1\r\n    },\r\n    HEAL: {\r\n        name: \"HEAL\",\r\n        multiplier: 1\r\n    },\r\n    DRAGONS_BREATH: {\r\n        name: \"DRAGONS_BREATH\",\r\n        multiplier: 5\r\n    }\r\n});",
    "/// <reference path=\"linker.js\" />\r\n\r\nvar game = new GameEngine();\r\ngame.start();"
  ]
}