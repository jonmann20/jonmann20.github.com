"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),BallPit=function(){function t(){var e=this;_classCallCheck(this,t),this.canvas=document.querySelector("canvas"),this.ctx=this.canvas.getContext("2d"),this.radius=3.5,this.balls=[],this.canvas.width=$(".main").width()/1.5,this.canvas.height=this.canvas.width/2,this.boundOnNumBalls=function(t){return e.onNumBalls(t.target.value)},this.boundOnSizeBalls=function(t){return e.onSizeBalls(t.target.value)},this.boundOnSpeedBalls=function(t){return e.onSpeedBalls(t.target.value)},document.querySelector(".numBalls").addEventListener("input",this.boundOnNumBalls),document.querySelector(".sizeBalls").addEventListener("input",this.boundOnSizeBalls),document.querySelector(".speedBalls").addEventListener("input",this.boundOnSpeedBalls);for(var i=0;i<20;++i)this.balls.push({x:Math.floor(Math.random()*(this.canvas.width+1)),y:Math.floor(Math.random()*(this.canvas.height+1)),velocity:{x:Math.floor(Math.random()*-3),y:Math.floor(7*Math.random())-3}});this.runSim()}return _createClass(t,[{key:"destroy",value:function(){window.cancelAnimationFrame(this.animLoop);var t=document.querySelector(".numBalls"),e=document.querySelector(".sizeBalls"),i=document.querySelector(".speedBalls");t&&t.removeEventListener("input",this.boundOnNumBalls),e&&e.removeEventListener("input",this.boundOnSizeBalls),i&&i.removeEventListener("input",this.boundOnSpeedBalls)}},{key:"update",value:function(){var t=!0,e=!1,i=void 0;try{for(var n,a=this.balls[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var l=n.value;l.x+=l.velocity.x,l.y+=l.velocity.y,l.x<0&&l.velocity.x<0&&(l.velocity.x=-l.velocity.x),l.y>=this.canvas.height&&l.velocity.y>0&&(l.velocity.y=-l.velocity.y),l.x>=this.canvas.width&&l.velocity.x>0&&(l.velocity.x=-l.velocity.x),l.y<0&&l.velocity.y<0&&(l.velocity.y=-l.velocity.y)}}catch(t){e=!0,i=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw i}}}},{key:"render",value:function(){this.ctx.fillStyle="#0098ff",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="#e1e1e1";var t=!0,e=!1,i=void 0;try{for(var n,a=this.balls[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var l=n.value;this.ctx.beginPath(),this.ctx.arc(l.x,l.y,this.radius,0,2*Math.PI,!1),this.ctx.fill(),this.ctx.lineWidth=this.radius/15,this.ctx.strokeStyle="#19a2ff",this.ctx.stroke(),this.ctx.closePath()}}catch(t){e=!0,i=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw i}}}},{key:"runSim",value:function(){var t=this;this.update(),this.render(),this.animLoop=requestAnimationFrame(function(){return t.runSim()})}},{key:"fixArr",value:function(t){var e=0,i=this.balls.length-t;if(i>0)for(;e<i;++e)this.balls.pop();else if(i<0)for(i=-i;e<i;++e){var n={x:Math.floor(Math.random()*(this.canvas.width-0+1))+0,y:Math.floor(Math.random()*(this.canvas.height+1)),velocity:{x:Math.floor(5*Math.random())+-2,y:Math.floor(7*Math.random())+-3}};0===n.velocity.x&&(n.velocity.x=1),0===n.velocity.y&&(n.velocity.y=1),this.balls.push(n)}}},{key:"updateUserSpeed",value:function(t,e){var i=void 0,n=void 0,a=!0,l=!1,o=void 0;try{for(var r,s=this.balls[Symbol.iterator]();!(a=(r=s.next()).done);a=!0){var c=r.value;i=c.velocity.x/t,n=c.velocity.y/t,c.velocity.x=i*e,c.velocity.y=n*e}}catch(t){l=!0,o=t}finally{try{!a&&s.return&&s.return()}finally{if(l)throw o}}}},{key:"onNumBalls",value:function(t){document.querySelector(".litNumBalls").textContent=t,this.fixArr(t)}},{key:"onSizeBalls",value:function(t){document.querySelector(".litSizeBalls").textContent=t,this.radius=t}},{key:"onSpeedBalls",value:function(t){this.updateUserSpeed(document.querySelector(".litSpeedBalls").textContent,t),document.querySelector(".litSpeedBalls").textContent=t}}]),t}();