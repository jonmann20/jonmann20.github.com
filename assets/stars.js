"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var StarryBg=function(){function t(){var e=this;_classCallCheck(this,t),this.boundOnRoute=function(t){return e.destroy(t.detail)},addEventListener("route",this.boundOnRoute,!!pListen&&{passive:!0});var i=document.querySelector("input[type=radio]:checked").value;this.initStar(i);for(var o=Array.from(document.querySelectorAll("input[type=radio]")),n=Array.isArray(o),s=0,o=n?o:o[Symbol.iterator]();;){var r;if(n){if(s>=o.length)break;r=o[s++]}else{if((s=o.next()).done)break;r=s.value}r.addEventListener("click",function(t){return e.onColorChange(t.target.value)})}}return t.prototype.destroy=function(t){var e=this;if("#playground/starry-background"!==t){removeEventListener("route",this.boundOnRoute,!!pListen&&{passive:!0}),cancelAnimationFrame(this.animLoop),this.starBg.destroy();for(var i=Array.from(document.querySelectorAll("input[type=radio]")),o=Array.isArray(i),n=0,i=o?i:i[Symbol.iterator]();;){var s;if(o){if(n>=i.length)break;s=i[n++]}else{if((n=i.next()).done)break;s=n.value}s.removeEventListener("click",function(t){return e.onColorChange(t.target.value)})}delete window.starryBg}},t.prototype.initStar=function(t){this.starBg=new StarBg({elt:document.getElementById("starry-canvas"),window_width:util.getMainWidth(),window_height:400,star_color:t,star_count:1300,star_depth:330,container:"starry-canvas"})},t.prototype.onColorChange=function(t){this.starBg.destroy(),delete this.starBg,this.initStar(t)},t}(),StarBg=function(){function t(e){var i=this;_classCallCheck(this,t),this.w_b="#000",this.s_color=e.star_color,this.fov=e.star_depth,this.SCREEN_WIDTH=e.window_width,this.SCREEN_HEIGHT=e.window_height,this.HALF_WIDTH=this.SCREEN_WIDTH/2,this.HALF_HEIGHT=this.SCREEN_HEIGHT/2,this.mouse_x=0,this.mouse_y=0,this.numPoints=e.star_count,this.points=[],this.elt=e.elt,this.ctx=this.elt.getContext("2d"),this.elt.setAttribute("width",this.SCREEN_WIDTH),this.elt.setAttribute("height",this.SCREEN_HEIGHT),this.boundOnMouseMove=function(t){return i.onMouseMove(t)},document.addEventListener("mousemove",this.boundOnMouseMove),this.initPoints(),this.loop()}return t.prototype.destroy=function(){cancelAnimationFrame(this.animLoop),document.removeEventListener("mousemove",this.boundOnMouseMove)},t.prototype.onMouseMove=function(t){this.mouse_x=t.pageX-this.HALF_WIDTH,this.mouse_y=t.pageY-this.HALF_HEIGHT},t.prototype.initPoints=function(){for(var t=void 0,e=0;e<this.numPoints;++e)t=[400*Math.random()-200,400*Math.random()-200,400*Math.random()-200],this.points.push(t)},t.prototype.loop=function(){var t=this;this.render(),this.animLoop=requestAnimationFrame(function(){return t.loop()})},t.prototype.render=function(){this.ctx.fillStyle=this.w_b,this.ctx.fillRect(0,0,this.SCREEN_WIDTH,this.SCREEN_HEIGHT);for(var t=0;t<this.numPoints;++t){var e=this.points[t],i=e[2];(i-=1.08)<-this.fov&&(i+=400),e[2]=i,this.draw3Din2D(e)}},t.prototype.draw3Din2D=function(t){var e=t[0],i=t[1],o=t[2],n=this.fov/(this.fov+o),s=e*n+this.HALF_WIDTH-this.mouse_x/3,r=i*n+this.HALF_HEIGHT-this.mouse_y/3;this.ctx.lineWidth=n,this.ctx.strokeStyle=this.s_color,this.ctx.beginPath(),this.ctx.moveTo(s,r),this.ctx.lineTo(s+n,r),this.ctx.stroke()},t}();